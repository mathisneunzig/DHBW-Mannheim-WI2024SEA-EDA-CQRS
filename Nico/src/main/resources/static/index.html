<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ARK Tek Defense Dashboard</title>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background-color: #121212; color: #00ff00; padding: 20px; 
            display: flex; justify-content: center;
        }
        .container { 
            width: 100%; max-width: 700px; background-color: #1e1e1e; 
            padding: 30px; border-radius: 12px; box-shadow: 0 0 20px rgba(0, 255, 0, 0.2); 
            border: 2px solid #333; 
        }
        h1 { text-align: center; color: #00ff00; text-transform: uppercase; border-bottom: 2px solid #333; padding-bottom: 10px;}
        .status-box { background-color: #000; padding: 20px; border-radius: 8px; margin-bottom: 25px; border: 1px solid #00ff00; font-family: monospace; font-size: 1.2em; text-align: center;}
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; color: #ccc; font-weight: bold;}
        input { width: 100%; padding: 10px; background-color: #222; border: 1px solid #555; color: #fff; border-radius: 6px; box-sizing: border-box; font-size: 16px;}
        button { width: 100%; padding: 15px; background-color: #00ff00; color: #000; border: none; font-weight: bold; font-size: 18px; cursor: pointer; border-radius: 6px; text-transform: uppercase; margin-bottom: 20px;}
        button:hover { background-color: #00cc00; }
        
        /* Das neue Live-Terminal Style */
        .terminal-box {
            background-color: #0a0a0a; border: 1px solid #444; border-radius: 6px; 
            padding: 15px; height: 250px; overflow-y: auto; font-family: 'Courier New', Courier, monospace;
            font-size: 14px; color: #00ff00; box-shadow: inset 0 0 10px #000;
        }
        .terminal-title { color: #888; font-size: 12px; margin-bottom: 8px; border-bottom: 1px dashed #444; padding-bottom: 4px; }
        .log-entry { margin-bottom: 4px; border-bottom: 1px solid #1a1a1a; padding-bottom: 2px;}
    </style>
</head>
<body>
    <div class="container">
        <h1>Ark Defense System</h1>

        <div class="status-box">
            <span id="dashboard-status">Lade Systemstatus...</span>
        </div>

         <div class="form-group">
            <label for="dinoInput">Gescannte Dino-Spezies (z.B.Basilisk, Bison, Achatina):</label>
            <input type="text" id="dinoInput" value="Basilisk" autocomplete="off">
        </div>
        <div class="form-group">
            <label>Sektor-Position:</label>
            <input type="text" id="sectorInput" value="Haupttor">
        </div>

        <button onclick="triggerRadar()">Sensor-Ping senden</button>

        <div class="terminal-box">
            <div id="terminal-content"></div>
        </div>
    </div>

    <script>
        function updateDashboard() {
            fetch('/api/dashboard')
                .then(response => response.text())
                .then(data => document.getElementById('dashboard-status').innerText = data);
        }

      
        function updateTerminal() {
            fetch('/api/logs')
                .then(response => response.json())
                .then(logs => {
                    const terminal = document.getElementById('terminal-content');
                    terminal.innerHTML = '';
                    logs.forEach(log => {
                        terminal.innerHTML += `<div class="log-entry">${log}</div>`;
                    });
                });
        }

        setInterval(updateDashboard, 1500);
        setInterval(updateTerminal, 1000); 
        updateDashboard();
        updateTerminal();

        function triggerRadar() {
            const dino = document.getElementById('dinoInput').value;
            const sector = document.getElementById('sectorInput').value;
            const url = `/api/radar/ping?dino=${encodeURIComponent(dino)}&threat=10&sector=${encodeURIComponent(sector)}`;
            fetch(url);
        }
    </script>
</body>
</html>